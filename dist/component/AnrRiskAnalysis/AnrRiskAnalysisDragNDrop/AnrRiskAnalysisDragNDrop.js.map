{"version":3,"file":"AnrRiskAnalysisDragNDrop.js","names":["AnrRiskAnalysisDragNDrop","_React$useState","React","useState","_React$useState2","_slicedToArray","showRiskAnalysis","setShowRiskAnalysis","_React$useState3","_React$useState4","showAssetsLibrary","setShowAssetsLibrary","_React$useState5","_React$useState6","searchCategoriesAssets","setSearchCategoriesAssets","_React$useState7","_React$useState8","searchedCategories","setSearchedCategories","_React$useState9","_React$useState10","searchInstancesAssets","setSearchInstancesAssets","_React$useState11","_React$useState12","searchedInstances","setSearchedInstances","_React$useState13","_React$useState14","categories","setCategories","_React$useState15","_React$useState16","instances","setInstances","_React$useState17","_React$useState18","width","setWidth","_React$useState19","_React$useState20","isVisible","setIsVisible","url","window","location","href","match","split","numero","nonFormattedToken","localStorage","getItem","token","replace","headers","Headers","append","model","ReactRedux","useSelector","state","riskAnalysis","dispatch","useDispatch","useEffect","undefined","fetch","concat","then","response","json","riskAnalysisSlice","actions","setModel","error","console","updatedInstances","addPropertyToChildren","index","initizaliseCategories","forEach","category","isShow","objects","length","object","child","onRiskAnalysisShowChange","onAssetsLibraryShowChange","parent","map","updatedChild","_objectSpread","updateInstances","id","instance","updateChildInstances","children","expandAll","way","instancesUpdated","updateTree","updateCategories","updatedCategories","categorie","updateChildCategories","onSearchCategoriesAssets","event","target","value","searchCategories","categ","language","toLowerCase","includes","push","onSearchInstancesAssets","searchInstances","inst","filter","obj","onDragEnd","result","Accept","Token","over","link","body","method","active","JSON","stringify","anrId","Number","position","instId","status","newObject","getNewObject","newInstances","_toConsumableArray","unshift","i","data","current","slice","newInstance","getNewInstance","removeInstance","addInstance","previousInstancePosition","getPreviousInstancePosition","insertIndex","splice","insertObject","j","changeInstance","droppable","draggable","foundInstance","newObjectId","destinationId","sensor","useSensor","PointerSensor","activationConstraint","delay","tolerance","handleMouseDown","preventDefault","document","addEventListener","handleMouseMove","handleMouseUp","newWidth","clientX","removeEventListener","showAssetModal","modalSlice","showAddAssetModal","createElement","style","className","DndContext","sensors","DropDownMenu","show","onChange","name","onClick","i18next","t","InputWithIcon","icon","label","LinkDroppable","InstanceDraggable","key","isActive","DisplayCategories","onMouseDown"],"sources":["../../../../component/AnrRiskAnalysis/AnrRiskAnalysisDragNDrop/AnrRiskAnalysisDragNDrop.tsx"],"sourcesContent":["import React from \"react\";\r\nimport i18next from \"ng_client/node_modules/i18next/i18next.js\";\r\nimport {\r\n    useSensor,\r\n    PointerSensor,\r\n    DndContext,\r\n} from \"ng_client/node_modules/@dnd-kit/core/dist/core.cjs.development.js\";\r\nimport DropDownMenu from \"ng_client/component/Component/DropDownMenu//DropDownMenu\";\r\nimport InputWithIcon from \"ng_client/component/Component/Inputs/InputWithIcon/InputWithIcon\";\r\nimport LinkDroppable from \"ng_client/component/AnrRiskAnalysis/AnrRiskAnalysisDragNDrop/LinkDroppable/LinkDroppable\";\r\nimport InstanceDraggable from \"ng_client/component/AnrRiskAnalysis/AnrRiskAnalysisDragNDrop/InstanceDraggable/InstanceDraggable\";\r\nimport DisplayCategories from \"ng_client/component/AnrRiskAnalysis/AnrRiskAnalysisDragNDrop/DisplayCategories/DisplayCategories\";\r\n\r\nimport modalSlice from \"ng_client/Slices/modalSlice\";\r\nimport riskAnalysisSlice from \"ng_client/Slices/riskAnalysisSlice\";\r\n\r\nimport * as ReactRedux from \"react-redux\";\r\n\r\nimport { Instance, Categorie, Model, State } from \"ng_client/component/interface/instanceInterface\"\r\n\r\n/* import {displayPlaylistModal} from 'ng_client/Slices/monarcSlice'\r\n */\r\nconst AnrRiskAnalysisDragNDrop = () => {\r\n\r\n\r\n    const [showRiskAnalysis, setShowRiskAnalysis] = React.useState(true);\r\n    const [showAssetsLibrary, setShowAssetsLibrary] = React.useState(true);\r\n\r\n    const [searchCategoriesAssets, setSearchCategoriesAssets] = React.useState(\"\");\r\n    const [searchedCategories, setSearchedCategories] = React.useState<Categorie[]>([]);\r\n\r\n    const [searchInstancesAssets, setSearchInstancesAssets] = React.useState(\"\");\r\n    const [searchedInstances, setSearchedInstances] = React.useState<Instance[]>([]);\r\n\r\n    const [categories, setCategories] = React.useState<Categorie[]>([]);\r\n    const [instances, setInstances] = React.useState<Instance[]>([]);\r\n\r\n    /*     const [model, setModel] = React.useState<Model>();\r\n     */\r\n    const [width, setWidth] = React.useState(260);\r\n    const [isVisible, setIsVisible] = React.useState(true);\r\n\r\n    var url = window.location.href;\r\n    var match = url.split('/');\r\n    var numero = match ? match[6] : null;\r\n\r\n    const nonFormattedToken = localStorage.getItem(\"ls.auth_token\");\r\n    const token = nonFormattedToken ? nonFormattedToken.replace(/\"/g, \"\") : null;\r\n\r\n    const headers = new Headers();\r\n    headers.append(\"Accept\", \"application/json, text/plain, */*\");\r\n    headers.append(\"Content-Type\", \"application/json\");\r\n    headers.append(\"Token\", token || \"\"); // Utilisez la version formatée du token ou une chaîne vide\r\n\r\n    const model: Model = ReactRedux.useSelector((state: State) => state.riskAnalysis.model)\r\n\r\n    const dispatch = ReactRedux.useDispatch()\r\n\r\n    React.useEffect(() => {\r\n        if (model === undefined) {\r\n            fetch(`api/client-anr/${numero}`, {\r\n                headers: headers,\r\n            })\r\n                .then((response) => response.json())\r\n                .then((response) => {\r\n                    dispatch(riskAnalysisSlice.actions.setModel(response))\r\n                })\r\n                .catch((error) => {\r\n                    console.error(error);\r\n                });\r\n        }\r\n        fetch(`api/client-anr/${numero}/instances`, {\r\n            headers: headers,\r\n        })\r\n            .then((response) => response.json())\r\n            .then((response) => {\r\n                const updatedInstances = addPropertyToChildren(response.instances);\r\n                setInstances(updatedInstances);\r\n            })\r\n            .catch((error) => {\r\n                console.error(error);\r\n            });\r\n\r\n\r\n        fetch(`api/client-anr/${numero}/library`, {\r\n            headers: headers,\r\n        })\r\n            .then((response) => response.json())\r\n            .then((response) => {\r\n                let index = 0;\r\n\r\n/*                 console.log(response)\r\n */                initizaliseCategories(response.categories, index);\r\n\r\n                setCategories(response.categories);\r\n            })\r\n            .catch((error) => {\r\n                console.error(error);\r\n            });\r\n    }, []);\r\n\r\n    function initizaliseCategories(categories, index) {\r\n        categories.forEach((category) => {\r\n            category.isShow = false;\r\n\r\n            if (category.objects.length > 0) {\r\n                category.objects.forEach((object) => {\r\n                    object.index = index;\r\n                    index++;\r\n                });\r\n            }\r\n\r\n            if (category.child) {\r\n                initizaliseCategories(category.child, index);\r\n            }\r\n        });\r\n    }\r\n\r\n    function onRiskAnalysisShowChange() {\r\n        setShowRiskAnalysis(!showRiskAnalysis);\r\n    }\r\n\r\n    function onAssetsLibraryShowChange() {\r\n        setShowAssetsLibrary(!showAssetsLibrary);\r\n    }\r\n\r\n    //add isShow attribute to check if child of instance are shown\r\n    function addPropertyToChildren(parent) {\r\n        return parent.map((child) => {\r\n            if (child.child.length > 0) {\r\n                const updatedChild = addPropertyToChildren(child.child);\r\n                return { ...child, isShow: false, child: updatedChild };\r\n            } else {\r\n                return child;\r\n            }\r\n        });\r\n    }\r\n\r\n    //set isShow of instance to true or false\r\n    function updateInstances(id) {\r\n        const updatedInstances = instances.map((instance) => {\r\n            if (instance.id === id) {\r\n                return { ...instance, isShow: !instance.isShow };\r\n            } else if (instance.child && instance.child.length > 0) {\r\n                const updatedChild = updateChildInstances(instance.child, id);\r\n                return { ...instance, child: updatedChild };\r\n            }\r\n            return instance;\r\n        });\r\n        setInstances(updatedInstances);\r\n    }\r\n\r\n    function updateChildInstances(children, id) {\r\n        return children.map((child) => {\r\n            if (child.id === id) {\r\n                return { ...child, isShow: !child.isShow };\r\n            } else if (child.child && child.child.length > 0) {\r\n                const updatedChild = updateChildInstances(child.child, id);\r\n                return { ...child, child: updatedChild };\r\n            }\r\n            return child;\r\n        });\r\n    }\r\n\r\n    function expandAll(instances, way) {\r\n        let instancesUpdated = instances.map((instance) => {\r\n            if (instance.child && instance.child.length > 0) {\r\n                instance.child = expandAll(instance.child, way);\r\n                return { ...instance, isShow: way };\r\n            } else {\r\n                return instance;\r\n            }\r\n        });\r\n        return instancesUpdated;\r\n    }\r\n\r\n    //expand or wrap tree of instances\r\n    function updateTree(way) {\r\n        let updatedInstances = expandAll(instances, way);\r\n        setInstances(updatedInstances);\r\n    }\r\n\r\n    //set isShow of category to true or false\r\n    function updateCategories(id) {\r\n        const updatedCategories = categories.map((categorie) => {\r\n            if (categorie.id === id) {\r\n                return { ...categorie, isShow: !categorie.isShow };\r\n            } else if (categorie.child && categorie.child.length > 0) {\r\n                const updatedChild = updateChildCategories(categorie.child, id);\r\n                return { ...categorie, child: updatedChild };\r\n            }\r\n            return categorie;\r\n        });\r\n\r\n        setCategories(updatedCategories);\r\n    }\r\n\r\n    function updateChildCategories(children, id) {\r\n        return children.map((child) => {\r\n            if (child.id === id) {\r\n                return { ...child, isShow: !child.isShow };\r\n            } else if (child.child && child.child.length > 0) {\r\n                const updatedChild = updateChildCategories(child.child, id);\r\n                return { ...child, child: updatedChild };\r\n            }\r\n            return child;\r\n        });\r\n    }\r\n\r\n    //search Categories when input is filled\r\n    function onSearchCategoriesAssets(event) {\r\n        setSearchCategoriesAssets(event.target.value);\r\n\r\n        if (event.target.value !== \"\") {\r\n            setSearchedCategories(searchCategories(categories, event.target.value));\r\n        }\r\n    }\r\n\r\n    function searchCategories(categ: Categorie[], event: string) {\r\n        return categ.map((categorie) => {\r\n            if (categorie.child) {\r\n                if (categorie.objects) {\r\n                    let objects: Categorie[] = [];\r\n                    categorie.objects.map((object: Categorie) => {\r\n                        if (\r\n                            object[`name${model?.language}`]\r\n                                .toLowerCase()\r\n                                .includes(event.toLowerCase())\r\n                        ) {\r\n                            objects.push(object);\r\n                        }\r\n                    });\r\n                    return {\r\n                        ...categorie,\r\n                        objects: objects,\r\n                        child: searchCategories(categorie.child, event),\r\n                        isShow: true,\r\n                    };\r\n                }\r\n                return {\r\n                    ...categorie,\r\n                    child: searchCategories(categorie.child, event),\r\n                    isShow: true,\r\n                };\r\n            }\r\n            if (categorie.objects) {\r\n                let objects: Categorie[] = [];\r\n                categorie.objects.map((object) => {\r\n                    if (\r\n                        object[`name${model?.language}`]\r\n                            .toLowerCase()\r\n                            .includes(event.toLowerCase())\r\n                    ) {\r\n                        objects.push(object);\r\n                    }\r\n                });\r\n                return { ...categorie, objects: objects, isShow: true };\r\n            }\r\n        });\r\n    }\r\n\r\n    //Search instance when input is filled\r\n    function onSearchInstancesAssets(event) {\r\n        setSearchInstancesAssets(event.target.value);\r\n        if (event.target.value !== \"\") {\r\n            setSearchedInstances(searchInstances(instances, event.target.value));\r\n        }\r\n    }\r\n\r\n    function searchInstances(inst, event) {\r\n        return inst\r\n            .map((instance) => {\r\n                if (instance.child.length > 0) {\r\n                    return {\r\n                        ...instance,\r\n                        child: searchInstances(instance.child, event),\r\n                        isShow: true,\r\n                    };\r\n                } else if (instance.parent === 0) {\r\n                    return instance;\r\n                } else {\r\n                    if (\r\n                        instance[`name${model?.language}`]\r\n                            .toLowerCase()\r\n                            .includes(event.toLowerCase())\r\n                    ) {\r\n                        return instance;\r\n                    }\r\n                }\r\n            })\r\n            .filter((obj) => obj !== undefined);\r\n    }\r\n\r\n    //when something is drop this function is called\r\n    function onDragEnd(result) {\r\n        const headers = {\r\n            Accept: \"application/json, text/plain, */*\",\r\n            \"Content-Type\": \"application/json\",\r\n            Token: token,\r\n        };\r\n\r\n        //the object is drop on project name\r\n        if (result.over.id === \"link\") {\r\n            let link;\r\n            let body;\r\n            let method;\r\n\r\n            if (typeof result.active.id === \"string\") {\r\n                //a category is drop\r\n                link = `api/client-anr/${numero}/instances`;\r\n                body = JSON.stringify({\r\n                    anrId: Number(numero),\r\n                    object: result.active.id,\r\n                    parent: 0,\r\n                    position: 0,\r\n                });\r\n                method = \"POST\";\r\n            } else {\r\n                //an instance is drop\r\n                link = `api/client-anr/${numero}/instances/${result.active.id}`;\r\n                body = JSON.stringify({\r\n                    anrId: Number(numero),\r\n                    instId: result.active.id,\r\n                    parent: 0,\r\n                    position: 0,\r\n                });\r\n                method = \"PATCH\";\r\n            }\r\n\r\n            fetch(link, {\r\n                method: method,\r\n                headers: {\r\n                    Accept: \"application/json, text/plain, */*\",\r\n                    \"Content-Type\": \"application/json\",\r\n                    Token: token || \"\",\r\n                },\r\n                body: body,\r\n            })\r\n                .then((response) => response.json())\r\n                .then((response) => {\r\n                    if (response.status === \"ok\") {\r\n                        if (response.id) {\r\n                            //case where we dragged and dropped a category\r\n                            const id = response.id;\r\n                            fetch(`api/client-anr/${numero}/instances`, {\r\n                                //we retrieve the new instance that has been created from the category\r\n                                headers: {\r\n                                    Accept: \"application/json, text/plain, */*\",\r\n                                    \"Content-Type\": \"application/json\",\r\n                                    Token: token || \"\",\r\n                                },\r\n                            })\r\n                                .then((response) => response.json())\r\n                                .then((response) => {\r\n                                    const newObject = response.instances\r\n                                        .map((instance) => {\r\n                                            return getNewObject(instance, id);\r\n                                        })\r\n                                        .filter(\r\n                                            (obj) => obj !== undefined && obj !== null\r\n                                        );\r\n\r\n                                    let newInstances = [...instances];\r\n                                    newInstances.unshift({ ...newObject[0] });\r\n\r\n                                    for (let i = 0; i < newInstances.length; i++) {\r\n                                        newInstances[i].position = i + 1;\r\n                                    }\r\n\r\n                                    setInstances(newInstances);\r\n                                })\r\n                                .catch((error) => {\r\n                                    console.error(error);\r\n                                });\r\n                        } else {\r\n                            let newInstances = instances.filter(\r\n                                (obj) => obj !== result.active.data.current\r\n                            );\r\n                            newInstances.unshift(result.active.data.current);\r\n\r\n                            for (let i = 0; i < newInstances.length; i++) {\r\n                                newInstances[i].position = i + 1;\r\n                            }\r\n\r\n                            setInstances(newInstances);\r\n                        }\r\n                    }\r\n                });\r\n        } else if (result.over.id.slice(0, 2) === \"on\") {\r\n            // case where we drop an object on an instance (object is added to instance childs)\r\n            if (typeof result.active.id === \"string\") {\r\n                // case where we drop a category on an instance\r\n                fetch(`api/client-anr/${numero}/instances`, {\r\n                    method: \"POST\",\r\n                    headers: {\r\n                        Accept: \"application/json, text/plain, */*\",\r\n                        \"Content-Type\": \"application/json\",\r\n                        Token: token || \"\",\r\n                    },\r\n                    body: JSON.stringify({\r\n                        anrId: Number(numero),\r\n                        object: result.active.id,\r\n                        parent: Number(result.over.id.slice(2)),\r\n                        position: 0,\r\n                    }),\r\n                })\r\n                    .then((response) => response.json())\r\n                    .then((response) => {\r\n                        const id = response.id;\r\n\r\n                        if (response.status === \"ok\") {\r\n                            fetch(`api/client-anr/${numero}/instances`, {\r\n                                headers: {\r\n                                    Accept: \"application/json, text/plain, */*\",\r\n                                    \"Content-Type\": \"application/json\",\r\n                                    Token: token || \"\",\r\n                                },\r\n                            })\r\n                                .then((response) => response.json())\r\n                                .then((response) => {\r\n                                    const newObject = response.instances\r\n                                        .map((instance) => {\r\n                                            return getNewObject(instance, id);\r\n                                        })\r\n                                        .filter(\r\n                                            (obj) => obj !== undefined && obj !== null\r\n                                        );\r\n\r\n                                    const newInstance = getNewInstance(\r\n                                        instances,\r\n                                        newObject[0],\r\n                                        result.over.id.slice(2)\r\n                                    );\r\n\r\n                                    const newInstances = instances.map((instance) => {\r\n                                        return instance.id === newInstance.id\r\n                                            ? newInstance\r\n                                            : instance;\r\n                                    });\r\n\r\n                                    setInstances(newInstances);\r\n                                })\r\n                                .catch((error) => {\r\n                                    console.error(error);\r\n                                });\r\n                        }\r\n                    })\r\n                    .catch((error) => console.error(error));\r\n            } else {\r\n                //case where we drop an instance on an other instance\r\n                fetch(`api/client-anr/${numero}/instances/${result.active.id}`, {\r\n                    method: \"PATCH\",\r\n                    headers: {\r\n                        Accept: \"application/json, text/plain, */*\",\r\n                        \"Content-Type\": \"application/json\",\r\n                        Token: token || \"\",\r\n                    },\r\n                    body: JSON.stringify({\r\n                        anrId: Number(numero),\r\n                        instId: result.active.id,\r\n                        parent: Number(result.over.data.current.id),\r\n                        position: 0,\r\n                    }),\r\n                })\r\n                    .then((response) => response.json())\r\n                    .then((response) => {\r\n                        if (response.status === \"ok\") {\r\n                            let newInstances = instances\r\n                                .map((instance) => {\r\n                                    return removeInstance(\r\n                                        instance,\r\n                                        result.active.data.current\r\n                                    );\r\n                                })\r\n                                .filter((obj) => obj !== undefined);\r\n\r\n                            newInstances = newInstances.map((instance) => {\r\n                                return addInstance(\r\n                                    instance,\r\n                                    result.active.data.current,\r\n                                    result.over.data.current\r\n                                );\r\n                            });\r\n\r\n                            setInstances(newInstances);\r\n                        }\r\n                    });\r\n            }\r\n        } else if (result.over.id.slice(0, 7) === \"between\") {\r\n            // case where we drop an object beetween two instances\r\n            if (typeof result.active.id === \"string\") {\r\n                // case where we drop a category\r\n                const previousInstancePosition = instances\r\n                    .map((instance) => {\r\n                        return getPreviousInstancePosition(\r\n                            instance,\r\n                            Number(result.over.id.slice(7))\r\n                        );\r\n                    })\r\n                    .filter((obj) => obj !== undefined);\r\n\r\n                fetch(`api/client-anr/${numero}/instances`, {\r\n                    method: \"POST\",\r\n                    headers: {\r\n                        Accept: \"application/json, text/plain, */*\",\r\n                        \"Content-Type\": \"application/json\",\r\n                        Token: token || \"\",\r\n                    },\r\n                    body: JSON.stringify({\r\n                        anrId: Number(numero),\r\n                        object: result.active.id,\r\n                        parent: previousInstancePosition[0].parent,\r\n                        position: Number(previousInstancePosition[0].position),\r\n                    }),\r\n                })\r\n                    .then((response) => response.json())\r\n                    .then((response) => {\r\n                        const id = response.id;\r\n\r\n                        if (response.status === \"ok\") {\r\n                            fetch(`api/client-anr/${numero}/instances`, {\r\n                                headers: {\r\n                                    Accept: \"application/json, text/plain, */*\",\r\n                                    \"Content-Type\": \"application/json\",\r\n                                    Token: token || \"\",\r\n                                },\r\n                            })\r\n                                .then((response) => response.json())\r\n                                .then((response) => {\r\n                                    const newObject = response.instances\r\n                                        .map((instance) => {\r\n                                            return getNewObject(instance, id);\r\n                                        })\r\n                                        .filter(\r\n                                            (obj) => obj !== undefined && obj !== null\r\n                                        );\r\n\r\n                                    if (newObject[0].parent === 0) {\r\n                                        const updatedInstances = [...instances];\r\n                                        let insertIndex = -1;\r\n\r\n                                        for (\r\n                                            let i = 0;\r\n                                            i < updatedInstances.length;\r\n                                            i++\r\n                                        ) {\r\n                                            if (\r\n                                                updatedInstances[i].position ===\r\n                                                newObject[0].position\r\n                                            ) {\r\n                                                insertIndex = i;\r\n                                                break;\r\n                                            }\r\n                                        }\r\n\r\n                                        if (insertIndex !== -1) {\r\n                                            updatedInstances.splice(\r\n                                                insertIndex,\r\n                                                0,\r\n                                                newObject[0]\r\n                                            );\r\n\r\n                                            for (\r\n                                                let i = insertIndex + 1;\r\n                                                i < updatedInstances.length;\r\n                                                i++\r\n                                            ) {\r\n                                                updatedInstances[i].position += 1;\r\n                                            }\r\n                                        } else {\r\n                                            updatedInstances.push(newObject[0]);\r\n                                        }\r\n\r\n                                        setInstances(updatedInstances);\r\n                                    } else {\r\n                                        const newInstances = instances\r\n                                            .map((instance) => {\r\n                                                return insertObject(\r\n                                                    instance,\r\n                                                    newObject[0]\r\n                                                );\r\n                                            })\r\n                                            .filter((obj) => obj !== undefined);\r\n\r\n                                        setInstances(newInstances);\r\n                                    }\r\n                                });\r\n                        }\r\n                    });\r\n            } else {\r\n                // case where we drop an instance\r\n                fetch(`api/client-anr/${numero}/instances/${result.active.id}`, {\r\n                    method: \"PATCH\",\r\n                    headers: {\r\n                        Accept: \"application/json, text/plain, */*\",\r\n                        \"Content-Type\": \"application/json\",\r\n                        Token: token || \"\",\r\n                    },\r\n                    body: JSON.stringify({\r\n                        anrId: Number(numero),\r\n                        instId: result.active.id,\r\n                        parent: Number(result.over.data.current.parent),\r\n                        position: result.over.data.current.position,\r\n                    }),\r\n                })\r\n                    .then((response) => response.json())\r\n                    .then((response) => {\r\n                        if (response.status === \"ok\") {\r\n                            let newInstances = instances\r\n                                .map((instance) => {\r\n                                    return removeInstance(\r\n                                        instance,\r\n                                        result.active.data.current\r\n                                    );\r\n                                })\r\n                                .filter((obj) => obj !== undefined);\r\n\r\n                            for (let i = 0; i < newInstances.length; i++) {\r\n                                if (\r\n                                    newInstances[i].id === result.over.data.current.id\r\n                                ) {\r\n                                    newInstances = [\r\n                                        ...newInstances.slice(\r\n                                            0,\r\n                                            result.over.data.current.position\r\n                                        ),\r\n                                        result.active.data.current,\r\n                                        ...newInstances.slice(\r\n                                            result.over.data.current.position\r\n                                        ),\r\n                                    ];\r\n\r\n                                    for (let j = 0; j < newInstances.length; j++) {\r\n                                        newInstances[j].position = j;\r\n                                    }\r\n\r\n                                    break;\r\n                                } else {\r\n                                    if (newInstances[i].child.length > 0) {\r\n                                        newInstances[i].child = changeInstance(\r\n                                            newInstances[i].child,\r\n                                            result.over.data.current,\r\n                                            result.active.data.current\r\n                                        );\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n                            setInstances(newInstances);\r\n                        }\r\n                    });\r\n            }\r\n        }\r\n    }\r\n\r\n    //return new instance when we drop an instance between to other instance\r\n    function changeInstance(instance, droppable, draggable) {\r\n        for (let i = 0; i < instance.length; i++) {\r\n            if (instance[i].id === droppable.id) {\r\n                instance = [\r\n                    ...instance.slice(0, droppable.position),\r\n                    draggable,\r\n                    ...instance.slice(droppable.position),\r\n                ];\r\n                for (let j = 0; j < instance.length; j++) {\r\n                    instance[j].position = j;\r\n                }\r\n                break;\r\n            } else {\r\n                if (instance[i].child.length > 0) {\r\n                    instance[i].child = changeInstance(\r\n                        instance[i].child,\r\n                        droppable,\r\n                        draggable\r\n                    );\r\n                }\r\n            }\r\n        }\r\n        return instance;\r\n    }\r\n\r\n    //add instance\r\n    function addInstance(instance, draggable, droppable) {\r\n        if (instance.id === droppable.id) {\r\n            instance.child.unshift(draggable);\r\n            for (let i = 0; i < instance.child.length; i++) {\r\n                instance.child[i].position = i;\r\n            }\r\n        } else if (instance.child.length > 0) {\r\n            instance.child = instance.child.map((child) =>\r\n                addInstance(child, draggable, droppable)\r\n            );\r\n        }\r\n        return instance;\r\n    }\r\n\r\n    //remove instance\r\n    function removeInstance(instance, result) {\r\n        if (instance.id === result.id) {\r\n            return undefined;\r\n        } else if (instance.child.length > 0) {\r\n            instance.child = instance.child\r\n                .map((child) => removeInstance(child, result))\r\n                .filter((obj) => obj !== undefined);\r\n        }\r\n        return instance;\r\n    }\r\n\r\n    //add category to instance\r\n    function insertObject(instance, newObject) {\r\n        if (instance.id === newObject.parent) {\r\n            let insertIndex = -1;\r\n            for (let i = 0; i < instance.child.length; i++) {\r\n                if (instance.child[i].position === newObject.position) {\r\n                    insertIndex = i;\r\n                    break;\r\n                }\r\n            }\r\n            if (insertIndex !== -1) {\r\n                instance.child.splice(insertIndex, 0, newObject);\r\n\r\n                for (let i = insertIndex + 1; i < instance.child.length; i++) {\r\n                    instance.child[i].position += 1;\r\n                }\r\n            } else {\r\n                instance.child.push(newObject);\r\n            }\r\n        } else if (instance.child.length > 0) {\r\n            for (let i = 0; i < instance.child.length; i++) {\r\n                insertObject(instance.child[i], newObject);\r\n            }\r\n        }\r\n        return instance;\r\n    }\r\n\r\n    //get the position of the previous instance\r\n    function getPreviousInstancePosition(instance, id) {\r\n        if (instance.id === id) {\r\n            return instance;\r\n        }\r\n        if (instance.child && instance.child.length > 0) {\r\n            for (let i = 0; i < instance.child.length; i++) {\r\n                const foundInstance = getPreviousInstancePosition(\r\n                    instance.child[i],\r\n                    id\r\n                );\r\n                if (foundInstance) {\r\n                    return foundInstance;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    //get instance that has been created from the category\r\n    function getNewObject(instance, newObjectId) {\r\n        if (instance.child.length > 0) {\r\n            if (instance.id === newObjectId) {\r\n                return instance;\r\n            } else {\r\n                for (let i = 0; i < instance.child.length; i++) {\r\n                    const result = getNewObject(instance.child[i], newObjectId);\r\n                    if (result) {\r\n                        return result;\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            if (instance.id === newObjectId) {\r\n                return instance;\r\n            } else {\r\n                return null;\r\n            }\r\n        }\r\n    }\r\n\r\n    function getNewInstance(instance, object, destinationId) {\r\n        for (let i = 0; i < instance.length; i++) {\r\n            if (instance[i].id === Number(destinationId)) {\r\n                instance[i].child.unshift(object);\r\n                let position = 0;\r\n                for (let j = 0; j < instance[i].child.length; j++) {\r\n                    instance[i].child[j].position = position;\r\n                    position++;\r\n                }\r\n                return instance[i];\r\n            } else {\r\n                if (instance[i].child.length > 0) {\r\n                    const result = getNewInstance(\r\n                        instance[i].child,\r\n                        object,\r\n                        destinationId\r\n                    );\r\n                    if (result) {\r\n                        return result;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    //user needs to maintain mouse click for 100ms to drag an object\r\n    const sensor = useSensor(PointerSensor, {\r\n        activationConstraint: {\r\n            delay: 100,\r\n            tolerance: 10,\r\n        },\r\n    });\r\n\r\n    const handleMouseDown = (event) => {\r\n        event.preventDefault();\r\n        document.addEventListener(\"mousemove\", handleMouseMove);\r\n        document.addEventListener(\"mouseup\", handleMouseUp);\r\n    };\r\n\r\n    const handleMouseMove = (event) => {\r\n        const newWidth = event.clientX / 2;\r\n        if (newWidth < 90) {\r\n            setIsVisible(false);\r\n        } else {\r\n            setIsVisible(true);\r\n        }\r\n        setWidth(newWidth);\r\n    };\r\n\r\n    const handleMouseUp = () => {\r\n        document.removeEventListener(\"mousemove\", handleMouseMove);\r\n        document.removeEventListener(\"mouseup\", handleMouseUp);\r\n    };\r\n\r\n\r\n\r\n    function showAssetModal() {\r\n        dispatch(modalSlice.actions.showAddAssetModal(true))\r\n    }\r\n    return (\r\n        <div style={{ width: width }} className=\"resizable\">\r\n            {isVisible && (\r\n                <DndContext onDragEnd={onDragEnd} sensors={[sensor]}>\r\n                    <DropDownMenu\r\n                        show={showRiskAnalysis}\r\n                        onChange={onRiskAnalysisShowChange}\r\n                        name='Risk analysis'\r\n                    />\r\n                    {showRiskAnalysis && (\r\n                        <div>\r\n                            <div className=\"d-flex justify-content-center align-items-center\">\r\n                                <button\r\n                                    className=\"btn button-show btn-dnd\"\r\n                                    onClick={() => updateTree(true)}\r\n                                >\r\n                                    {i18next.t(\"Expand all\")}\r\n                                </button>\r\n                                <span>/</span>\r\n                                <button\r\n                                    className=\"btn button-show btn-dnd\"\r\n                                    onClick={() => updateTree(false)}\r\n                                >\r\n                                    {i18next.t(\"Wrap all\")}\r\n                                </button>\r\n                            </div>\r\n                            <InputWithIcon\r\n                                className=\"mx-0\"\r\n                                icon=\"bi bi-search\"\r\n                                label={i18next.t(\"Search an asset\") + '...'}\r\n                                value={searchInstancesAssets}\r\n                                onChange={onSearchInstancesAssets}\r\n                            />\r\n                            <div>\r\n                                {model !== undefined && <LinkDroppable model={model} />}\r\n                                <ol className=\"no-list-style treeview2 instances\">\r\n                                    {searchInstancesAssets !== \"\"\r\n                                        ? searchedInstances.map((instance) => (\r\n                                            Number(match[9]) === instance.id ?\r\n                                                <InstanceDraggable\r\n                                                    instance={instance}\r\n                                                    key={instance.id}\r\n                                                    updateInstances={updateInstances}\r\n                                                    model={model}\r\n                                                    isActive={true}\r\n                                                />\r\n                                                :\r\n                                                <InstanceDraggable\r\n                                                    instance={instance}\r\n                                                    key={instance.id}\r\n                                                    updateInstances={updateInstances}\r\n                                                    model={model}\r\n                                                />\r\n                                        ))\r\n                                        : instances.map((instance) => (\r\n                                            Number(match[9]) === instance.id ?\r\n                                            <InstanceDraggable\r\n                                                instance={instance}\r\n                                                key={instance.id}\r\n                                                updateInstances={updateInstances}\r\n                                                model={model}\r\n                                                isActive={true}\r\n                                            />\r\n                                            :\r\n                                            <InstanceDraggable\r\n                                                instance={instance}\r\n                                                key={instance.id}\r\n                                                updateInstances={updateInstances}\r\n                                                model={model}\r\n                                            />\r\n                                        ))}\r\n                                </ol>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                    <DropDownMenu\r\n                        show={showAssetsLibrary}\r\n                        onChange={onAssetsLibraryShowChange}\r\n                        name=\"Assets library\"\r\n                    />\r\n                    {showAssetsLibrary && (\r\n                        <div>\r\n                            <div className=\"d-flex\">\r\n                                <InputWithIcon\r\n                                    className=\"mx-0\"\r\n                                    icon=\"bi bi-search\"\r\n                                    label={i18next.t(\"Search an asset\") + '...'}\r\n                                    value={searchCategoriesAssets}\r\n                                    onChange={onSearchCategoriesAssets}\r\n                                />\r\n                                <button className=\"btn\" onClick={showAssetModal}>\r\n                                    <i className=\"bi bi-plus-square-fill primary-color icon-large\" />\r\n                                </button>\r\n                            </div>\r\n                            <div className=\"ps-2\">\r\n                                {searchCategoriesAssets === \"\" ? (\r\n                                    <DisplayCategories\r\n                                        categ={categories}\r\n                                        updateCategories={updateCategories}\r\n                                        model={model}\r\n                                    />\r\n                                ) : (\r\n                                    <DisplayCategories\r\n                                        categ={searchedCategories}\r\n                                        updateCategories={updateCategories}\r\n                                        model={model}\r\n                                    />\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </DndContext>\r\n            )}\r\n            <div className=\"resizer resizer-r rg-right\" onMouseDown={handleMouseDown}>\r\n                <span />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AnrRiskAnalysisDragNDrop;\r\n"],"mappings":"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"}