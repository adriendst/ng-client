{"version":3,"file":"MOSPImportAssetModal.js","names":["MOSPImportAssetModal","url","window","location","href","match","numero","nonFormattedToken","localStorage","getItem","token","replace","headers","Headers","append","_React$useState","React","useState","innerWidth","_React$useState2","_slicedToArray","windowWidth","setWindowWidth","_React$useState3","_React$useState4","organizations","setOrganizations","_React$useState5","_React$useState6","selectedOrganization","setSelectedOrganization","_React$useState7","_React$useState8","assetOptions","setAssetOptions","_React$useState9","_React$useState10","selectedAsset","setSelectedAsset","_React$useState11","_React$useState12","category","setCategory","_React$useState13","_React$useState14","categoryId","setCategoryId","_React$useState15","_React$useState16","assets","setAssets","_React$useState17","_React$useState18","objects","setObjects","model","ReactRedux","useSelector","state","riskAnalysis","onCategorySelect","event","target","value","selectedOptions","id","categoriesOptions","categories","languages","useEffect","handleResize","addEventListener","removeEventListener","fetch","then","response","json","console","log","error","data","_loop","i","find","organization","push","translation","name","length","concat","onAssetSelect","option","onOrganizationSelect","organizationId","mosp_assets","filter","asset","map","object","uuid","includes","json_object","language","code","toUpperCase","displayedAssetsMapped","addCategory","dispatch","useDispatch","showCategoryModal","mode","modalSlice","actions","disabledImport","undefined","onImport","parentCategories","categ","parts","split","trim","selectedCateg","categorie","categoriesAll","label","catego","reverse","createElement","className","style","color","Select","options","icon","onChange","CustomSelect","onSelect","onClick","i18next","t","disabled"],"sources":["../../../../../component/AnrRiskAnalysis/Modal/MOSPImportAssetModal/MOSPImportAssetModal.tsx"],"sourcesContent":["import React from 'react'\r\nimport * as ReactRedux from 'react-redux'\r\nimport i18next from \"ng_client/node_modules/i18next/i18next.js\";\r\n\r\nimport Select from \"ng_client/component/Component/Selects/Select/Select\";\r\n\r\nimport { State, Options, Model, Language, Object } from \"ng_client/component/interface/instanceInterface\"\r\nimport CustomSelect from 'ng_client/component/Component/Selects/CustomSelect/CustomSelect';\r\n\r\nconst MOSPImportAssetModal = () => {\r\n  \r\n  var url = window.location.href;\r\n  var match = url.match(/\\/(\\d+)\\//);\r\n  var numero = match ? match[1] : null;\r\n\r\n  const nonFormattedToken = localStorage.getItem(\"ls.auth_token\");\r\n  const token = nonFormattedToken ? nonFormattedToken.replace(/\"/g, \"\") : null;\r\n\r\n  const headers = new Headers();\r\n  headers.append(\"Accept\", \"application/json, text/plain, */*\");\r\n  headers.append(\"Content-Type\", \"application/json\");\r\n  headers.append(\"Token\", token || \"\");\r\n\r\n  const [windowWidth, setWindowWidth] = React.useState(window.innerWidth);\r\n\r\n  const [organizations, setOrganizations] = React.useState<Options[]>([])\r\n  const [selectedOrganization, setSelectedOrganization] = React.useState()\r\n\r\n  const [assetOptions, setAssetOptions] = React.useState<Options[]>([])\r\n  const [selectedAsset, setSelectedAsset] = React.useState('')\r\n  const [category, setCategory] = React.useState<string>('')\r\n  const [categoryId, setCategoryId] = React.useState<number>()\r\n\r\n  const [assets, setAssets] = React.useState<Object[]>([])\r\n\r\n  const [objects, setObjects] = React.useState([])\r\n\r\n\r\n  const model: Model = ReactRedux.useSelector((state: State) => state.riskAnalysis.model)\r\n\r\n\r\n\r\n  function onCategorySelect(event) {\r\n    setCategory(event.target.value)\r\n    setCategoryId(event.target.selectedOptions[0].id)\r\n  }\r\n\r\n  const categoriesOptions: Options[] = ReactRedux.useSelector((state: State) => state.riskAnalysis.categories)\r\n\r\n  const languages: Language[] = ReactRedux.useSelector((state: State) => state.riskAnalysis.languages)\r\n\r\n  React.useEffect(() => {\r\n    const handleResize = () => {\r\n      setWindowWidth(window.innerWidth);\r\n    }\r\n\r\n    window.addEventListener('resize', handleResize);\r\n\r\n    return () => {\r\n      window.removeEventListener('resize', handleResize);\r\n    };\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    fetch(`https://objects.monarc.lu/api/v2/organization/?per_page=500`, {\r\n      headers: headers\r\n    })\r\n      .then(response => response.json())\r\n      .then(response => {\r\n        console.log(response)\r\n      })\r\n      .catch(error => console.error(error));\r\n\r\n\r\n    fetch(`https://objects.monarc.lu/api/v2/object/?schema=Library%20objects&per_page=3000`, {\r\n      headers: headers\r\n    })\r\n      .then(response => response.json())\r\n      .then(response => {\r\n        console.log(response)\r\n\r\n        setAssets(response.data)\r\n\r\n        const organizations: Options[] = [];\r\n\r\n        for (let i = 0; i < response.data.length; i++) {\r\n          if (!organizations.find(organization => organization.id === response.data[i].organization.id)) {\r\n            organizations.push({ id: response.data[i].organization.id, translation: response.data[i].organization.name, value: response.data[i].organization.name })\r\n          }\r\n        }\r\n        setOrganizations(organizations)\r\n      })\r\n      .catch(error => console.error(error));\r\n\r\n    fetch(`api/client-anr/${numero}/objects`, {\r\n      headers: headers\r\n    })\r\n      .then((response) => response.json())\r\n      .then((response) => {\r\n        console.log(response)\r\n\r\n        setObjects(response.objects)\r\n      })\r\n      .catch((error) => {\r\n        console.error(error);\r\n      });\r\n\r\n  }, [])\r\n\r\n  function onAssetSelect(option) {\r\n    setSelectedAsset(option.value)\r\n  }\r\n\r\n  function onOrganizationSelect(event) {\r\n    setSelectedOrganization(event.target.value);\r\n    setSelectedAsset('')\r\n    const organizationId = organizations.find(organization => event.target.value === organization.name)\r\n    const mosp_assets = assets.filter(\r\n      asset => {\r\n        return asset.organization.id == organizationId.id &&\r\n          !objects.map(object => object.uuid).includes(asset.json_object.object.object.uuid) &&\r\n          asset.json_object.object.object.language == languages[model.language - 1].code.toUpperCase()\r\n      }\r\n    );\r\n\r\n    const displayedAssetsMapped = mosp_assets.map(asset => ({\r\n      value: asset.name,\r\n      translation: asset.name,\r\n      id: asset.id,\r\n    })) as Options[];\r\n\r\n    setAssetOptions(displayedAssetsMapped)\r\n    console.log(displayedAssetsMapped)\r\n  }\r\n\r\n  function addCategory() {\r\n/*     props.showMOSPModal()\r\n    props.showCategoryModal() */\r\n  }\r\n\r\n  const dispatch = ReactRedux.useDispatch()\r\n  function showCategoryModal(mode, id) {\r\n    dispatch(modalSlice.actions.showCategoryModal([true, mode, id]))\r\n  }\r\n\r\n  function disabledImport() {\r\n    if (selectedOrganization === undefined || category === '' || selectedAsset === '') {\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  function onImport() {\r\n    console.log(selectedOrganization, selectedAsset, category)\r\n    console.log(objects)\r\n\r\n    const parentCategories = []\r\n\r\n\r\n    let categ;\r\n    if (category.includes('>>')) {\r\n      const parts = category.split('>>');\r\n      categ = parts[parts.length - 1].trim();\r\n    }\r\n    else {\r\n      categ = category\r\n    }\r\n\r\n    const selectedCateg = categoriesOptions.find(categorie => categorie.categorie[`label${model.language}`] === categ)\r\n    console.log(selectedCateg)\r\n\r\n      const categoriesAll = [];\r\n      const parts = selectedCateg.value.split('>>')\r\n      console.log(parts, parts.length)\r\n      for (let i = 0; i < parts.length; i++) {\r\n        const label = `label${model.language}`\r\n        const catego = []\r\n        catego[label] = parts[i]\r\n        console.log(catego)\r\n        if (i === 0) {\r\n          catego['parent'] = null\r\n        }\r\n        else {\r\n          catego['parent'] = parts.length - i\r\n        }\r\n        categoriesAll.push(catego)\r\n        console.log(catego)\r\n\r\n      }\r\n    \r\n      console.log(categoriesAll.reverse())\r\n\r\n  }\r\n\r\n  console.log(organizations)\r\n\r\n  React.useEffect(()=> {\r\n\r\n  }, [organizations])\r\n\r\n  console.log(organizations)\r\n\r\n  return (\r\n    <div className=\"modal-alert\">\r\n      <div className={windowWidth > 960 ? 'modal-MOSP' : 'fullscreen-modal-MOSP d-flex flex-column'}>\r\n        <div className=\"d-flex justify-content-between primary-backgroundcolor\">\r\n          <h4 className=\"m-3\">Import an asset from MOSP</h4>\r\n          <button className=\"btn me-2\" /* onClick={props.showMOSPModal} */ style={{ color: 'white' }}>\r\n            <i className=\"bi bi-x-lg\" />\r\n          </button>\r\n        </div>\r\n        <Select options={organizations} icon=\"bi bi-bank2\" value={selectedOrganization} onChange={onOrganizationSelect} label=\"Organization\" />\r\n        {assetOptions.length > 0 && (\r\n          <CustomSelect options={assetOptions} icon=\"bi bi-pin-fill\" value={selectedAsset} onSelect={onAssetSelect} label=\"Asset\" />\r\n        )}\r\n        <div className=\"d-flex\">\r\n          <div className=\"flex-grow-1\">\r\n            <Select icon=\"bi bi-bookmark-fill\" options={categoriesOptions} onChange={onCategorySelect} value={category} label=\"Category\" />\r\n          </div>\r\n          <i className=\"bi bi-plus icon-large pt-3 ps-3\" onClick={() => showCategoryModal('add', 0)} />\r\n        </div>\r\n        <div className=\"d-flex justify-content-end align-items-center my-3\">\r\n          <button className=\"btn btn-outline-secondary\" /* onClick={props.showMOSPModal} */>\r\n            {i18next.t('Cancel')}\r\n          </button>\r\n          <button className=\"btn btn-outline-warning mx-2\" disabled={disabledImport()} onClick={onImport}>\r\n            {i18next.t('Import')}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MOSPImportAssetModal"],"mappings":"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"}