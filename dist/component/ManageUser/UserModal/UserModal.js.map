{"version":3,"file":"UserModal.js","names":["UserModal","_ref","clientsCount","handleClose","modal","mode","setClientsCount","id","localToken","localStorage","getItem","token","replace","_React$useState","React","useState","_React$useState2","_slicedToArray","anrs","setAnrs","rolesOptions","value","translation","permissionsOptions","_React$useState3","_React$useState4","firstName","setFirstName","_React$useState5","_React$useState6","lastName","setLastName","_React$useState7","_React$useState8","email","setEmail","_React$useState9","_React$useState10","roles","setRoles","_React$useState11","_React$useState12","definePassword","setDefinePassword","_React$useState13","_React$useState14","password","setPassword","_React$useState15","_React$useState16","confirmPassword","setConfirmPassword","_React$useState17","_React$useState18","userPermissions","setUserPermissions","_React$useState19","window","innerWidth","_React$useState20","windowWidth","setWindowWidth","useEffect","handleResize","addEventListener","removeEventListener","anrsClient","clientAnrFetch","fetch","headers","Accept","Token","then","response","json","data","console","log","error","Promise","all","result","concat","permissions","i","length","push","rwd","firstname","lastname","role","onFirstNameChange","event","target","onLastNameChange","onEmailChange","onDefinePasswordChange","onPasswordChange","onConfirmPasswordChange","onUserArnsChange","anrId","selectedRwd","anr","Number","prevPermissions","existingAnrIndex","findIndex","item","updatedPermissions","_toConsumableArray","_objectSpread","map","onValidation","method","body","JSON","stringify","ok","disabeldCreate","createElement","className","i18next","t","onClick","style","color","InputWithIcon","hasToBeFilled","icon","label","onChange","title","SearchSelect","setValue","options","multiple","type","index","key","language","Select","disabled"],"sources":["../../../../component/ManageUser/UserModal/UserModal.tsx"],"sourcesContent":["import React from \"react\";\r\nimport i18next from \"ng_client/node_modules/i18next/i18next.js\";\r\n\r\nimport InputWithIcon from 'ng_client/component/Component/Inputs/InputWithIcon/InputWithIcon';\r\nimport Select from 'ng_client/component/Component/Selects/Select/Select'\r\nimport SearchSelect from 'ng_client/component/Component/Selects/SearchSelect/SearchSelect'\r\nimport {Model, Options} from \"ng_client/component/interface/instanceInterface\"\r\n\r\n\r\ninterface UserModalInterface{\r\n    clientsCount : number,\r\n    handleClose() : void,\r\n    modal : boolean,\r\n    mode : string,\r\n    setClientsCount(clientsNumber : number) : void,\r\n    id : number\r\n}\r\n\r\nconst UserModal = ({clientsCount, handleClose, modal, mode, setClientsCount, id} : UserModalInterface) => {\r\n\r\n    const localToken = localStorage.getItem(\"ls.auth_token\");\r\n    let token;\r\n    if (localToken !== null) {\r\n        token = localToken.replace(/\"/g, \"\");\r\n    }\r\n\r\n    const [anrs, setAnrs] = React.useState<Model[]>([]);\r\n\r\n    const rolesOptions = [\r\n        { value: \"superadminfo\", translation: \"Administrator\" },\r\n        { value: \"userfo\", translation: \"User\" },\r\n        { value: \"ceo\", translation: \"Global dashboard\" },\r\n    ];\r\n\r\n    const permissionsOptions : Options[] = [\r\n        { value: \"-1\", translation: \"No access\" },\r\n        { value: \"0\", translation: \"Read\" },\r\n        { value: \"1\", translation: \"Read and write\" },\r\n    ];\r\n\r\n    const [firstName, setFirstName] = React.useState(\"\");\r\n    const [lastName, setLastName] = React.useState(\"\");\r\n    const [email, setEmail] = React.useState(\"\");\r\n    const [roles, setRoles] = React.useState<string[]>([]);\r\n    const [definePassword, setDefinePassword] = React.useState(false);\r\n    const [password, setPassword] = React.useState(\"\");\r\n    const [confirmPassword, setConfirmPassword] = React.useState(\"\");\r\n    const [userPermissions, setUserPermissions] = React.useState<{ id: any; rwd: any; }[]>([]);\r\n    const [windowWidth, setWindowWidth] = React.useState(window.innerWidth);\r\n\r\n    React.useEffect(() => {\r\n        const handleResize = () => {\r\n            setWindowWidth(window.innerWidth);\r\n        };\r\n\r\n        window.addEventListener(\"resize\", handleResize);\r\n\r\n        return () => {\r\n            window.removeEventListener(\"resize\", handleResize);\r\n        };\r\n    }, []);\r\n\r\n\r\n    React.useEffect(() => {\r\n        let anrsClient;\r\n        const clientAnrFetch = fetch(`api/client-anr`, {\r\n            headers: {\r\n                Accept: \"application/json, text/plain, */*\",\r\n                Token: token,\r\n            },\r\n        })\r\n            .then((response) => response.json())\r\n            .then((data) => {\r\n                console.log(data)\r\n                setAnrs(data.anrs);\r\n                anrsClient = data.anrs\r\n            })\r\n            .catch((error) => console.error(error));\r\n\r\n        Promise.all([clientAnrFetch]).then( result => {\r\n            if (mode !== \"create\") {\r\n                fetch(`api/users/${id}`, {\r\n                    headers: {\r\n                        Accept: \"application/json, text/plain, */*\",\r\n                        Token: token,\r\n                    },\r\n                })\r\n                    .then((response) => response.json())\r\n                    .then((data) => {\r\n                        let permissions: { id: any; rwd: any }[] = [];\r\n                        for (let i = 0; i < data.anrs.length; i++) {\r\n                            permissions.push({\r\n                                id: data.anrs[i].id,\r\n                                rwd: data.anrs[i].rwd,\r\n                            });\r\n                        }\r\n                        setFirstName(data.firstname);\r\n                        setLastName(data.lastname);\r\n                        setEmail(data.email);\r\n                        setRoles(data.role);\r\n                        setUserPermissions(permissions);\r\n                        setDefinePassword(false);\r\n                        setPassword(\"\");\r\n                        setConfirmPassword(\"\");\r\n                    })\r\n                    .catch((error) => console.error(error));\r\n            } else {\r\n                let permissions: { id: any; rwd: any }[] = [];\r\n    \r\n                for(let i = 0; i<anrsClient.length; i++){\r\n                    permissions.push({\r\n                        id: anrsClient[i].id,\r\n                        rwd: -1,\r\n                    });\r\n                }\r\n                setFirstName(\"\");\r\n                setLastName(\"\");\r\n                setEmail(\"\");\r\n                setRoles([]);\r\n                setUserPermissions(permissions);\r\n                setDefinePassword(false);\r\n                setPassword(\"\");\r\n                setConfirmPassword(\"\");\r\n            }\r\n        })\r\n    }, []);\r\n\r\n    function onFirstNameChange(event) {\r\n        setFirstName(event.target.value);\r\n    }\r\n\r\n    function onLastNameChange(event) {\r\n        setLastName(event.target.value);\r\n    }\r\n\r\n    function onEmailChange(event) {\r\n        setEmail(event.target.value);\r\n    }\r\n\r\n    function onDefinePasswordChange() {\r\n        setDefinePassword(!definePassword);\r\n    }\r\n\r\n    function onPasswordChange(event) {\r\n        setPassword(event.target.value);\r\n    }\r\n\r\n    function onConfirmPasswordChange(event) {\r\n        setConfirmPassword(event.target.value);\r\n    }\r\n\r\n    function onUserArnsChange(event, anrId) {\r\n        console.log(event, anrId);\r\n        const selectedRwd = event.target.value;\r\n        const anr = { id: Number(anrId), rwd: selectedRwd };\r\n    \r\n        setUserPermissions((prevPermissions) => {\r\n            const existingAnrIndex = prevPermissions.findIndex((item) => item.id === anrId);\r\n    \r\n            if (selectedRwd === \"-1\") {\r\n                if (existingAnrIndex !== -1) {\r\n                    const updatedPermissions = [...prevPermissions];\r\n                    updatedPermissions[existingAnrIndex] = { ...prevPermissions[existingAnrIndex], rwd: selectedRwd };\r\n                    return updatedPermissions;\r\n                }\r\n            } else {\r\n                if (existingAnrIndex !== -1) {\r\n                    return prevPermissions.map((item) =>\r\n                        item.id === anrId ? { ...item, rwd: selectedRwd } : item\r\n                    );\r\n                } else {\r\n                    return [...prevPermissions, anr];\r\n                }\r\n            }\r\n            return prevPermissions; \r\n        });\r\n    }\r\n    \r\n\r\n    function onValidation() {\r\n        if (mode === \"create\") {\r\n            fetch(`api/users`, {\r\n                method: \"POST\",\r\n                headers: {\r\n                    Accept: \"application/json, text/plain, */*\",\r\n                    \"Content-Type\": \"application/json\",\r\n                    Token: token,\r\n                },\r\n                body: JSON.stringify({\r\n                    firstname: firstName,\r\n                    lastname: lastName,\r\n                    email: email,\r\n                    role: roles,\r\n                    anrs: userPermissions,\r\n                }),\r\n            })\r\n                .then((response) => {\r\n                    if (response.ok) {\r\n                        setClientsCount(clientsCount + 1);\r\n                    }\r\n                })\r\n                .catch((error) => console.error(error));\r\n        } else {\r\n            fetch(`api/users/${id}`, {\r\n                method: \"PATCH\",\r\n                headers: {\r\n                    Accept: \"application/json, text/plain, */*\",\r\n                    \"Content-Type\": \"application/json\",\r\n                    Token: token,\r\n                },\r\n                body: JSON.stringify({\r\n                    firstname: firstName,\r\n                    lastname: lastName,\r\n                    email: email,\r\n                    role: roles,\r\n                    anrs: userPermissions,\r\n                }),\r\n            }).catch((error) => console.error(error));\r\n        }\r\n        handleClose();\r\n    }\r\n\r\n\r\n    function disabeldCreate() {\r\n        if (firstName === \"\" || lastName == \"\" || email == \"\") {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"modal-alert\">\r\n            <div\r\n                className={`${windowWidth > 960 ? \"modal-user\" : \"modal-user-fullscreen\"\r\n                    } d-flex flex-column`}\r\n            >\r\n                <div className=\"d-flex justify-content-between primary-backgroundcolor\">\r\n                    <h4 className=\"m-3\">\r\n                        {mode === \"create\"\r\n                            ? i18next.t(\"Add an user\")\r\n                            : i18next.t(\"Edit user\")}\r\n                    </h4>\r\n                    <button\r\n                        className=\"btn me-2\"\r\n                        onClick={handleClose}\r\n                        style={{ color: \"white\" }}\r\n                    >\r\n                        <i className=\"bi bi-x-lg\"></i>\r\n                    </button>\r\n                </div>\r\n                <div className=\"userForm flex-grow-1\">\r\n                    <form className=\"m-3\">\r\n                        <div className=\"d-flex\">\r\n                            <InputWithIcon\r\n                                hasToBeFilled={true}\r\n                                icon=\"bi bi-person-fill\"\r\n                                label=\"First name\"\r\n                                value={firstName}\r\n                                onChange={onFirstNameChange}\r\n                                className=\"flex-grow-1\"\r\n                                title={i18next.t(\"Please fill out this field.\")}\r\n                            />\r\n                            <InputWithIcon\r\n                                hasToBeFilled={true}\r\n                                label=\"Last name\"\r\n                                value={lastName}\r\n                                onChange={onLastNameChange}\r\n                                className=\"flex-grow-1 ms-2\"\r\n                                title={i18next.t(\"Please fill out this field.\")}\r\n                            />\r\n                        </div>\r\n                        <div>\r\n                            <InputWithIcon\r\n                                hasToBeFilled={true}\r\n                                icon=\"bi bi-envelope-fill\"\r\n                                label=\"E-mail\"\r\n                                value={email}\r\n                                onChange={onEmailChange}\r\n                                title={i18next.t(\"Please fill out this field.\")}\r\n                            />\r\n                        </div>\r\n                        <SearchSelect\r\n                            value={roles}\r\n                            label=\"Permissions and roles\"\r\n                            setValue={setRoles}\r\n                            options={rolesOptions}\r\n                            multiple={true}\r\n                            icon=\"bi bi-card-list\"\r\n                        />\r\n                        <div className=\"form-check form-switch my-4 pl-5\">\r\n                            <input\r\n                                className=\"form-check-input switch-input-lg\"\r\n                                type=\"checkbox\"\r\n                                onChange={onDefinePasswordChange}\r\n                            />\r\n                            <label className=\"form-check-label ps-3\">\r\n                                {i18next.t(\"Set password\")}\r\n                            </label>\r\n                        </div>\r\n                        {definePassword && (\r\n                            <div className='pb-4'>\r\n                                <InputWithIcon\r\n                                    icon=\"bi bi-lock-fill\"\r\n                                    label=\"Password\"\r\n                                    value={password}\r\n                                    onChange={onPasswordChange}\r\n                                />\r\n                                <InputWithIcon\r\n                                    icon=\"bi bi-lock-fill\"\r\n                                    label=\"Confirm password\"\r\n                                    value={confirmPassword}\r\n                                    onChange={onConfirmPasswordChange}\r\n                                />\r\n                            </div>\r\n                        )}\r\n                        <table className=\"table table-bordered\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>{i18next.t(\"Risk analysis label\")}</th>\r\n                                    <th>{i18next.t(\"Persmissions\")}</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {anrs.map((anr, index) => {\r\n                                    return (\r\n                                        <tr key={anr.id}>\r\n                                            <td>{anr[`label${anr.language}`]}</td>\r\n                                            <td>\r\n                                                <Select\r\n                                                    options={permissionsOptions}\r\n                                                    onChange={onUserArnsChange}\r\n                                                    value={userPermissions[index] ? userPermissions[index].rwd : \"\"}\r\n                                                    index={anr.id} \r\n                                                />\r\n                                            </td>\r\n                                        </tr>\r\n                                    );\r\n                                })}\r\n                            </tbody>\r\n                        </table>\r\n                    </form>\r\n                </div>\r\n                <div className=\"d-flex justify-content-end align-items-center my-3\">\r\n                    <button\r\n                        className=\"btn btn-outline-secondary\"\r\n                        onClick={handleClose}\r\n                    >\r\n                        {i18next.t(\"Cancel\")}\r\n                    </button>\r\n                    <button\r\n                        className=\"btn btn-outline-warning mx-2\"\r\n                        onClick={onValidation}\r\n                        disabled={disabeldCreate()}\r\n                    >\r\n                        {mode === \"create\"\r\n                            ? i18next.t(\"Create\")\r\n                            : i18next.t(\"Save\")}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default UserModal;\r\n"],"mappings":"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"}