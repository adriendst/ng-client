{"version":3,"file":"MonarcExportFileModal.js","names":["MonarcExportFileModal","_React$useState","React","useState","_React$useState2","_slicedToArray","importMethod","setImportMethod","_React$useState3","_React$useState4","password","setPassword","_React$useState5","_React$useState6","file","setFile","url","window","location","href","match","numero","nonFormattedToken","localStorage","getItem","token","replace","headers","Headers","append","onPasswordChange","event","target","value","changeImportMethod","onChange","files","importFile","formData","FormData","console","log","i","length","concat","name","fetch","method","body","then","response","json","data","error","createElement","className","i18next","t","style","color","type","id","checked","htmlFor","InputWithIcon","label","icon","onClick"],"sources":["../../../../../component/Component/Modal/MonarcExportFileModal/MonarcExportFileModal.tsx"],"sourcesContent":["import React from 'react'\r\nimport i18next from \"ng_client/node_modules/i18next/i18next.js\";\r\n\r\nimport InputWithIcon from \"ng_client/component/Component/Inputs/InputWithIcon/InputWithIcon\";\r\n\r\n\r\nconst MonarcExportFileModal = () => {\r\n\r\n    const [importMethod, setImportMethod] = React.useState('merge')\r\n\r\n    const [password, setPassword] = React.useState<string>('')\r\n\r\n    const [file, setFile] = React.useState<any>()\r\n\r\n    var url = window.location.href;\r\n    var match = url.match(/\\/(\\d+)\\//);\r\n    var numero = match ? match[1] : null;\r\n\r\n    const nonFormattedToken = localStorage.getItem(\"ls.auth_token\");\r\n    const token = nonFormattedToken ? nonFormattedToken.replace(/\"/g, \"\") : null;\r\n\r\n    const headers = new Headers();\r\n    headers.append(\"Accept\", \"application/json, text/plain, */*\");\r\n    headers.append(\"Content-Type\", \"application/json\");\r\n    headers.append(\"Token\", token || \"\");\r\n\r\n    function onPasswordChange(event) {\r\n        setPassword(event.target.value)\r\n    }\r\n\r\n    function changeImportMethod() {\r\n        if (importMethod === 'merge') {\r\n            setImportMethod('duplicate')\r\n        }\r\n        else {\r\n            setImportMethod('merge')\r\n        }\r\n    }\r\n\r\n    function onChange(event) {\r\n        const file = event.target.files;\r\n        setFile(file)\r\n\r\n      }\r\n\r\n\r\n        function importFile() {\r\n            const formData = new FormData();\r\n            console.log(file)\r\n            formData.append('mode', importMethod);\r\n            // Loop through each file in the fileList and append them individually\r\n            for (let i = 0; i < file.length; i++) {\r\n                formData.append(`file[${i}]`, file[i], file[i].name);\r\n            }\r\n            formData.append('password', password);\r\n        \r\n            fetch(`api/client-anr/${numero}/objects/import`, {\r\n              method: 'POST',\r\n              headers : headers,\r\n              body: formData,\r\n            })\r\n              .then((response) => response.json())\r\n              .then((data) => {\r\n                console.log(data)\r\n              })\r\n              .catch((error) => {\r\n                console.error('Error uploading file:', error);\r\n              });\r\n        }\r\n        return (\r\n            <div className=\"modal-alert\">\r\n                <div className=\"modal-user-fullscreen\">\r\n                    <div className=\"d-flex justify-content-between primary-backgroundcolor\">\r\n                        <h4 className=\"m-3\">{i18next.t('Asset import center')}</h4>\r\n                        <button className=\"btn me-2\" /* onClick={props.showMonarcLibraryModal} */ style={{ color: 'white' }}>\r\n                            <i className=\"bi bi-x-lg\"></i>\r\n                        </button>\r\n                    </div>\r\n                    <div className=\"m-4\">\r\n                        <div>\r\n                            <span>{i18next.t('Import method')} :</span>\r\n                            <div className=\"form-check\">\r\n                                <input className=\"form-check-input\" type=\"radio\" name=\"flexRadioDefault\" id=\"flexRadioDefault1\" checked={importMethod === 'merge' ? false : true} onChange={changeImportMethod} />\r\n                                <label className=\"form-check-label\" htmlFor=\"flexRadioDefault1\">{i18next.t('By duplicating')}</label>\r\n                            </div>\r\n\r\n                            <div className=\"form-check\">\r\n                                <input className=\"form-check-input\" type=\"radio\" name=\"flexRadioDefault\" id=\"flexRadioDefault2\" checked={importMethod === 'merge' ? true : false} onChange={changeImportMethod} />\r\n                                <label className=\"form-check-label\" htmlFor=\"flexRadioDefault2\">{i18next.t('By merging')}</label>\r\n                            </div>\r\n                            <span className=\"assetInfo p-3 my-3\">{i18next.t('Only global assets can be imported by merge')}</span>\r\n                        </div>\r\n                        <div>\r\n                            <input type=\"file\" onChange={onChange} />\r\n                            <InputWithIcon onChange={onPasswordChange} value={password} label={i18next.t('Asset password (if any)')} icon={'bi bi-key-fill'} />\r\n                        </div>\r\n                        <div className=\"d-flex justify-content-end\">\r\n                            <button className=\"btn btn-outline\" onClick={importFile}>\r\n                                <i className=\"bi bi-download\" />\r\n                                {i18next.t('Import file')}\r\n                            </button>\r\n                        </div>\r\n                        <div className=\"d-flex justify-content-end align-items-center my-4\">\r\n                            <button className=\"btn btn-outline-secondary\">\r\n                                {i18next.t('Cancel')}\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    export default MonarcExportFileModal"],"mappings":"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"}