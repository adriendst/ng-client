{"version":3,"file":"SearchSelect.js","names":["SearchSelect","_ref","icon","label","multiple","options","setValue","value","_React$useState","React","useState","_React$useState2","_slicedToArray","isFocus","setIsFocus","_React$useState3","_React$useState4","firstFocus","setFirstFocus","rolesRef","useRef","firstFocusRef","useEffect","current","$","select2","placeholder","i18next","t","on","event","selectedOptions","val","openSelect","attr","closeSelect","console","log","length","addClass","removeClass","off","createElement","className","style","paddingRight","concat","color","undefined","map","option","key","translation"],"sources":["../../../../../component/Component/Selects/SearchSelect/SearchSelect.tsx"],"sourcesContent":["import React from \"react\";\r\nimport i18next from \"ng_client/node_modules/i18next/i18next.js\";\r\nimport $ from 'ng_client/node_modules/jquery/dist/jquery.min.js'\r\nimport { Options } from \"ng_client/component/interface/instanceInterface\";\r\n\r\ninterface SearchSelectInterface {\r\n  icon: string,\r\n  label: string,\r\n  multiple: boolean,\r\n  options: Options[],\r\n  setValue: React.Dispatch<React.SetStateAction<string[]>>,\r\n  value: string[],\r\n}\r\n\r\nconst SearchSelect = ({ icon, label, multiple, options, setValue, value }: SearchSelectInterface) => {\r\n\r\n  const [isFocus, setIsFocus] = React.useState(false)\r\n  const [firstFocus, setFirstFocus] = React.useState(false)\r\n  const rolesRef = React.useRef(value);\r\n  const firstFocusRef = React.useRef(firstFocus);\r\n\r\n\r\n  React.useEffect(() => {\r\n    rolesRef.current = value;\r\n    firstFocusRef.current = firstFocus\r\n  }, [value, firstFocus]);\r\n\r\n\r\n  React.useEffect(() => {\r\n    $('.js-example-basic-multiple').select2({\r\n      placeholder: i18next.t(label),\r\n    });\r\n\r\n    $('.js-example-basic-multiple').on('change', function (event) {\r\n      const selectedOptions = $(this).val();\r\n      rolesRef.current = selectedOptions;\r\n      setValue(selectedOptions);\r\n    });\r\n\r\n    const openSelect = () => {\r\n      $('.select2-search__field').attr('placeholder', '');\r\n      setIsFocus(true);\r\n      if (!firstFocus) {\r\n        setFirstFocus(true)\r\n      }\r\n    };\r\n\r\n    const closeSelect = () => {\r\n      console.log('close')\r\n      if (rolesRef.current.length === 0) {\r\n        $('.select2-search__field').attr(\r\n          'placeholder',\r\n          i18next.t(label)\r\n        );\r\n      }\r\n      console.log(firstFocusRef, rolesRef)\r\n      if (firstFocusRef.current && rolesRef.current.length === 0) {\r\n        $('.select2-search__field').addClass('danger-input');\r\n        $('.select2-selection').addClass('danger-input');\r\n      }\r\n      else {\r\n        $('.select2-search__field').removeClass('danger-input');\r\n        $('.select2-selection').removeClass('danger-input');\r\n      }\r\n      setIsFocus(false);\r\n    };\r\n\r\n    if(value.length === 0){\r\n      setIsFocus(false)\r\n    }\r\n\r\n    $('.js-example-basic-multiple').on('select2:open', openSelect);\r\n    $('.js-example-basic-multiple').on('select2:close', closeSelect);\r\n\r\n    return () => {\r\n      $('.js-example-basic-multiple').off('select2:open', openSelect);\r\n      $('.js-example-basic-multiple').off('select2:close', closeSelect);\r\n    };\r\n  }, [value]);\r\n\r\nconsole.log(value)\r\nconsole.log(isFocus)\r\n\r\n\r\n  return (\r\n    <div className=\"row pb-2 pr-0\">\r\n      <div className=\"col-auto d-flex align-items-center pt-3\" style={{ paddingRight: '0px' }}>\r\n        <i className={`${icon} icon-large`}></i>\r\n      </div>\r\n      <div className=\"col\">\r\n        <label style={{ color: (firstFocusRef.current && rolesRef.current.length === 0) ? 'rgb(221,44,0)' : 'rgba(0,0,0,0.54)' }}>\r\n          {isFocus || value.length > 0 ? i18next.t(label) : ''}\r\n        </label>\r\n        <div>\r\n          <select className=\"js-example-basic-multiple\" multiple={multiple} value={value.length > 0 ? value : undefined}>\r\n            {options && options.map(option => (\r\n              <option value={option.value} className=\"selectOption\" key={option.value}>\r\n                {i18next.t(option.translation)}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SearchSelect"],"mappings":"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"}